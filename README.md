# 注音亂碼救星 - 使用教學

忘記切換輸入法，把「你好」打成 `su3cl3` 怎麼辦？這個機器人會自動幫你翻譯回來！

![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)
![Discord](https://img.shields.io/badge/Discord-Py-latest-green.svg)

---

## 📖 什麼是注音亂碼？

當你用注音輸入法，卻切到英文鍵盤時，就會出現這種亂碼：

| 你想打的 | 亂碼長這樣 |
|---------|-----------|
| 你好 | `su3cl3` |
| 大家好 | `284ru8 cl3` |
| 謝謝 | `vu,4vu,4` |

---

## 🚀 快速開始

### 第一步：加入機器人

把機器人邀請到你的 Discord 伺服器（需要伺服器管理員權限）

### 第二步：打一段亂碼

在頻道裡直接打一段注音亂碼，例如：
```
su3cl3
```

機器人會自動偵測並回覆：
```
🔍 翻譯結果
誤輸入: su3cl3
實際意思: 你好
```

就這樣！不需要下任何指令，機器人就會自動幫你翻譯。

---

## 💡 使用技巧

### 技巧一：翻譯正確嗎？給個回饋

當機器人翻譯後，會出現三個按鈕：

| 按鈕 | 用途 |
|-----|------|
| ✅ 正確 | 按下後，機器人會記錄這個翻譯是對的，下次優先使用 |
| 📝 修正翻譯 | 如果翻錯了，點這個按鈕輸入正確的中文 |
| 🚫 忽略此亂碼 | 如果這不是亂碼（例如人名），點這個按鈕，下次就不再翻譯 |

### 技巧二：教機器人新詞彙

如果機器人翻譯錯了，你可以手動教它：

1. 輸入 `/add` 指令
2. 填寫亂碼和正確的中文
3. 例如：`/add su3cl3 你好`

之後再遇到 `su3cl3`，就會直接翻成「你好」。

### 技巧三：查詢某個亂碼有什麼候選字

想知道某個亂碼有什麼可能的翻譯嗎？

輸入 `/check su3`，會顯示：
```
📖 詞彙查詢
查詢: su3

候選字:
🥇 你 (900000分)
🥈 泥 (5000分)
🥉 尼 (5000分)
```

分數越高，機器人越會優先選這個翻譯。

### 技巧四：不想翻譯某些詞

有些詞看起來像亂碼，但其實不是（例如英文人名、縮寫）：

1. 輸入 `/ignore alice`
2. 之後再遇到 `alice` 就不會翻譯了

要取消的話，用 `/unignore alice`

查看所有忽略的詞：輸入 `/ignores`

### 技巧五：刪除錯誤的學習

如果不小心教錯了，可以刪除：

```
/forget su3cl3 你好
```

---

## 📊 UI 介面設計

機器人使用 Discord Embed 設計讓回覆更清晰美觀：

### 📋 翻譯結果
```
🔍 翻譯結果
誤輸入: su3cl3
實際意思: 你好
[✅ 正確] [📝 修正翻譯] [🚫 忽略此亂碼]
```

### 🧠 學習新詞
```
🧠 已學習新詞
之後遇到 `su3cl3` 會翻譯成 你好

亂碼: su3cl3
對應: 你好
```

### 📖 詞彙查詢
```
📖 詞彙查詢
查詢: ru8

候選字:
🥇 入 (900000分)
🥈 儒 (5000分)
🥉 如 (5000分)
```

### 🚫 忽略模式
```
🚫 已新增忽略模式
之後遇到 `alice` 將不會翻譯

模式: alice
```

---

## 📚 指令速查表

| 指令 | 用途 | 範例 |
|-----|------|------|
| `/add` | 教機器人新詞 | `/add su3cl3 你好` |
| `/check` | 查看某個亂碼的候選字 | `/check su3` |
| `/forget` | 刪除錯誤的學習 | `/forget su3cl3 你好` |
| `/ignore` | 設定不翻譯的詞 | `/ignore alice` |
| `/unignore` | 取消忽略設定 | `/unignore alice` |
| `/ignores` | 查看所有忽略的詞 | `/ignores` |

---

## ⚙️ 部署自己的機器人（進階）

想自己架設這個機器人嗎？

### 方法一：在本機上運行

1. **安裝 Python 依賴**
```bash
pip install -r requirements.txt
```

2. **建立設定檔**
建立 `config.py` 文件：
```python
DISCORD_TOKEN = "你的Discord機器人Token"
```

3. **準備字典資料**
```bash
python migrate_json_to_sql.py
```

4. **啟動機器人**
```bash
python bot.py
```

### 方法二：用 Docker 運行

```bash
docker-compose up -d
```

或直接用 Docker：
```bash
docker build -t discord-translator .
docker run -d --name discord-translator discord-translator
```

---

## 🔍 常見問題

**Q: 機器人為什麼不翻譯我的訊息？**

A: 機器人只會翻譯注音亂碼（英文+數字），純英文不會翻譯。如果你確定是亂碼，可以用 `/add` 指令教它。

**Q: 翻譯錯誤怎麼辦？**

A: 點擊「📝 修正翻譯」按鈕輸入正確答案，或使用 `/add` 指令。

**Q: 可以在私人訊息裡用嗎？**

A: 可以，只要是機器人所在的伺服器都可以使用。

**Q: 權重是什麼意思？**

A: 權重越高，機器人越優先選這個翻譯。你可以透過點擊「✅ 正確」按鈕來提高權重。

---

## 🛠️ 開發資訊

### 系統架構
```
┌─────────────┐
│   Bot 介面  │  (bot.py)
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  轉換器     │  (bpmf_converter.py)
│  (英數→注音) │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  切字器     │  (bpmf_segmenter.py)
│  (注音切分) │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  翻譯引擎   │  (local_engine.py)
│  (SQLite)   │
└─────────────┘
```

### 專案結構
```
.
├── bot.py                    # Discord 機器人主程式
├── bpmf_converter.py         # 注音轉換器
├── bpmf_segmenter.py         # 注音切分器
├── local_engine.py           # 本地翻譯引擎
├── dictionary.db             # SQLite 字典資料庫
└── requirements.txt          # Python 依賴套件
```

---

Made with ❤️ by 林佑尚